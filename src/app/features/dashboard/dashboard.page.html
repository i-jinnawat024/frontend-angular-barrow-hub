<div class="container-fluid px-4 py-8">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-primary">แดชบอร์ด</h1>
    <p class="mt-2 text-secondary">ภาพรวมข้อมูลระบบจัดการเล่มทะเบียนและการยืม</p>
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <!-- Total Documents Card -->
    <div class="bg-surface rounded-lg shadow p-6 border border-subtle">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-secondary">เล่มทะเบียนทั้งหมด</p>
          <p class="text-3xl font-bold text-primary mt-2">
            {{ stats().totalDocuments }}
          </p>
        </div>
        <div class="p-3 icon-accent-primary-bg rounded-full">
          <mat-icon class="material-symbols-outlined">book_4</mat-icon>
        </div>
      </div>
    </div>

    <!-- Total Staff Card -->
    <div class="bg-surface rounded-lg shadow p-6 border border-subtle">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-secondary">บุคลากรทั้งหมด</p>
          <p class="text-3xl font-bold text-primary mt-2">
            {{ stats().totalStaff }}
          </p>
        </div>
        <div class="p-3 icon-accent-success-bg rounded-full">
          <mat-icon class="material-symbols-outlined">groups</mat-icon>
        </div>
      </div>
    </div>

    <!-- Borrowed Documents Card -->
    <div class="bg-surface rounded-lg shadow p-6 border border-subtle">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-secondary">เล่มทะเบียนที่ถูกยืม</p>
          <p class="text-3xl font-bold text-primary mt-2">
            {{ stats().borrowedDocuments }}
          </p>
        </div>
        <div class="p-3 icon-accent-warning-bg rounded-full">
          <mat-icon class="material-symbols-outlined">compare_arrows</mat-icon>
        </div>
      </div>
    </div>
  </div>

  <!-- Active Loans Table -->
  <div class="bg-surface rounded-lg shadow border border-subtle">
    <div class="overflow-x-auto">
      @if (getActiveLoans().length > 0 ) {
      <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
        <table class="w-full text-left text-sm text-primary rtl:text-right">
          <caption
            class="p-5 text-lg font-semibold  rtl:text-right text-gray-900 bg-primary text-primary"
          >
            เล่มทะเบียนที่ถูกยืมอยู่
            <p class="mt-1 text-sm font-normal text-muted">
              รายการเล่มทะเบียนทั้งหมดที่ถูกยืมอยู่ในขณะนี้
            </p>
          </caption>
          <thead class="bg-table-header text-xs font-semibold uppercase text-secondary">
            @for (header of tableHeader; track header.property) {
            <th
              class="px-6 py-3 text-left text-xs font-medium text-secondary uppercase tracking-wider"
            >
              {{ header.label }}
            </th>
            }
          </thead>
          <tbody>
            @for (loan of getActiveLoans(); track loan.id) {
            <tr
              class="border-b border-subtle bg-surface transition hover:bg-surface-hover"
            >
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex flex-col">
                  <div class="text-sm font-medium text-primary">
                    {{ loan.document.title }}
                  </div>
                  <div class="text-sm text-muted">
                    {{ loan.document.documentNumber }}
                  </div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex flex-col">
                  <div class="text-sm font-medium text-primary">
                    {{ loan.borrower.name }}
                  </div>
                  <div class="text-sm text-muted">
                    {{ loan.borrower.position }}
                  </div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-muted">
                {{ loan.borrowedAt | date : 'dd/MM/yyyy' }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="badge badge-warning"> กำลังยืม </span>
              </td>
              <!-- <td class="px-6 py-4 text-right">
                <a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline"
                  >Edit</a
                >
              </td> -->
            </tr>
            }
          </tbody>
        </table>
      </div>
      } @else {
      <div class="p-12 text-center">
        <mat-icon class="material-symbols-outlined"> inventory_2 </mat-icon>
        <h3 class="mt-2 text-sm font-medium text-primary">ไม่มีเล่มทะเบียนที่ถูกยืม</h3>
        <p class="mt-1 text-sm text-muted">ไม่มีเล่มทะเบียนใดที่กำลังถูกยืมอยู่ในขณะนี้</p>
      </div>
      }
    </div>
  </div>
</div>
