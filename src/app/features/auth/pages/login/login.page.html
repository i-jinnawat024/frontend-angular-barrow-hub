<section class="flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900">
  <div class="relative hidden flex-1 items-center justify-center overflow-hidden lg:flex">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,#38bdf8,transparent_45%)] opacity-60"></div>
    <div class="relative z-10 max-w-xl px-10 text-center text-white">
      <p class="text-sm uppercase tracking-[0.3em] text-blue-200">Barrow Hub</p>
      <h1 class="mt-4 text-4xl font-bold leading-tight lg:text-5xl">
        ระบบบริหารจัดการ <br />
        งานทะเบียนเอกสาร
      </h1>
      <p class="mt-6 text-lg text-blue-100">
        จัดการข้อมูลการยืม-คืนเอกสาร และติดตามงานแบบเรียลไทม์
      </p>
    </div>
    <div class="absolute inset-0 bg-slate-900/60"></div>
  </div>

  <div class="flex min-h-screen flex-1 items-center justify-center bg-page px-6 py-12 sm:px-10">
    <div class="w-full max-w-md rounded-2xl border border-subtle bg-surface p-8 shadow-2xl shadow-slate-900/10">
      <div class="mb-8 text-center">
        <div class="mx-auto flex h-14 w-14 items-center justify-center rounded-2xl bg-blue-100 text-blue-600">
          <mat-icon class="material-symbols-outlined text-3xl">lock</mat-icon>
        </div>
        <h2 class="mt-4 text-2xl font-semibold text-primary">เข้าสู่ระบบ Barrow Hub</h2>
        <p class="mt-2 text-sm text-muted">ลงชื่อเข้าใช้เพื่อเริ่มจัดการงานทะเบียนเอกสารของคุณ</p>
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="submit()" class="space-y-6">
        <div class="space-y-2">
          <label class="form-label" for="email">อีเมล</label>
          <div class="relative">
            <mat-icon class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-secondary">mail</mat-icon>
            <input
              type="email"
              id="email"
              formControlName="email"
              class="form-control ps-10"
              placeholder="เช่น somchai@gmail.com"
              autocomplete="email"
              spellcheck="false"
            />
          </div>
          @if (hasError('email', 'required')) {
          <p class="text-sm text-danger">กรุณากรอกอีเมล</p>
          } @else if (hasError('email', 'email')) {
          <p class="text-sm text-danger">รูปแบบอีเมลไม่ถูกต้อง</p>
          }
        </div>

        <div class="space-y-2">
          <label class="form-label" for="password">รหัสผ่าน</label>
          <div class="relative">
            <mat-icon class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-secondary">key</mat-icon>
            <input
              [type]="passwordInputType()"
              id="password"
              formControlName="password"
              class="form-control ps-10 pe-12"
              placeholder="กรอกรหัสผ่านของคุณ"
              autocomplete="current-password"
            />
            <button
              type="button"
              class="absolute right-3 top-1/2 -translate-y-1/2 text-secondary transition hover:text-primary focus-visible:outline-none"
              (click)="togglePasswordVisibility()"
              [attr.aria-pressed]="passwordVisible()"
            >
              <mat-icon class="material-symbols-outlined">
                {{ passwordVisible() ? 'visibility_off' : 'visibility' }}
              </mat-icon>
            </button>
          </div>
          @if (hasError('password', 'required')) {
          <p class="text-sm text-danger">กรุณากรอกรหัสผ่าน</p>
          } @else if (hasError('password', 'minlength')) {
          <p class="text-sm text-danger">รหัสผ่านต้องมีความยาวอย่างน้อย 8 ตัวอักษร</p>
          }
        </div>

        <div class="flex items-center justify-between">
          <label class="inline-flex items-center gap-2 text-sm text-secondary">
            <input
              type="checkbox"
              formControlName="rememberMe"
              class="accent-primary h-4 w-4 cursor-pointer rounded border-subtle"
            />
            <span>จดจำฉันไว้ในระบบ</span>
          </label>

          @if (showForgotPasswordEntry) {
          <a routerLink="/forgot-password" class="text-sm text-link hover:text-link-strong">
            ลืมรหัสผ่าน?
          </a>
          }
        </div>

        @if (authErrorMessage()) {
        <div class="rounded-xl border border-danger bg-danger/10 px-4 py-3 text-sm text-danger" role="alert">
          {{ authErrorMessage() }}
        </div>
        }

        <button
          type="submit"
          class="btn-primary w-full justify-center py-3 text-base font-semibold"
          [disabled]="submitting()"
        >
          @if (submitting()) {
          <span
            class="inline-flex h-5 w-5 animate-spin rounded-full border-2 border-white/80 border-t-transparent"
          ></span>
          กำลังตรวจสอบ...
          } @else {
          <mat-icon class="material-symbols-outlined text-lg">login</mat-icon>
          เข้าสู่ระบบ
          }
        </button>

      
      </form>
    </div>
  </div>
</section>
