<div class="container mx-auto px-4 py-8 max-w-2xl">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-primary">
      {{ isEditMode ? 'แก้ไขหนังสือทะเบียน' : 'สร้างหนังสือทะเบียนใหม่' }}
    </h1>
    <p class="mt-2 text-secondary">
      {{ isEditMode ? 'แก้ไขข้อมูลหนังสือทะเบียน' : 'กรุณากรอกข้อมูลเพื่อสร้างหนังสือทะเบียนใหม่' }}
    </p>
  </div>

  <!-- Form -->
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="bg-surface rounded-lg shadow border border-subtle p-6">
    <div class="space-y-6">
      <!-- Book Number -->
      <div>
        <label for="bookNumber" class="form-label">
          เลขทะเบียน <span class="text-danger">*</span>
        </label>
        <input type="text" id="documentId" formControlName="documentId"
          class="form-control px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="เช่น 6800000000" />
        @if (form.get('documentId')?.invalid && form.get('documentId')?.touched) {
        <p class="mt-1 text-sm text-danger">กรุณากรอกเลขทะเบียน</p>
        }
      </div>

      <!-- Title -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <!-- ชื่อผู้ต้องขัง -->
        <div>
          <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">
            ชื่อผู้ต้องขัง <span class="text-red-600">*</span>
          </label>
          <input type="text" id="firstName" formControlName="firstName"
            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            placeholder="เช่น สมชาย" />
          @if (form.get('firstName')?.invalid && form.get('firstName')?.touched) {
          <p class="mt-1 text-xs text-red-600">กรุณากรอกชื่อผู้ต้องขัง</p>
          }
        </div>

        <!-- นามสกุลผู้ต้องขัง -->
        <div>
          <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">
            นามสกุลผู้ต้องขัง <span class="text-red-600">*</span>
          </label>
          <input type="text" id="lastName" formControlName="lastName"
            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            placeholder="เช่น ใจดี" />
          @if (form.get('lastName')?.invalid && form.get('lastName')?.touched) {
          <p class="mt-1 text-xs text-red-600">กรุณากรอกนามสกุลผู้ต้องขัง</p>
          }
        </div>
      </div>
      @if(isEditMode){
          <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          สถานะ
        </label>

        @if (form.get('status')?.value === 'BORROWED') {
        <div class="w-full px-4 py-2.5 bg-gray-50 border border-gray-300 rounded-lg text-gray-700 font-medium">
          ถูกยืม
          <span
            class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
            ถูกยืม
          </span>
        </div>
        } @else {
        <div class="relative">
          <select id="status" formControlName="status" class="appearance-none w-full px-4 py-2.5 pr-10 bg-white border border-gray-300 rounded-lg shadow-sm text-gray-700 font-medium
               focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
               hover:border-gray-400 transition-all duration-200 cursor-pointer">
            <option value="" disabled>เลือกสถานะ</option>
            <option value="ACTIVE">เปิดใช้งาน</option>
            <option value="INACTIVE">ไม่เปิดใช้งาน</option>
          </select>
          <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
            <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
        }
      </div>
      }
    
    </div>

    <!-- Actions -->
    <div class="mt-6 flex items-center justify-end gap-3">
      <button type="button" class="btn-secondary cursor-pointer" (click)="cancel()">
        ยกเลิก
      </button>
      <button type="submit" class="btn-primary cursor-pointer" [disabled]="form.invalid">
        บันทึก
      </button>
    </div>
  </form>
</div>